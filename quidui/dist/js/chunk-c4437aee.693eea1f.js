(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4437aee"],{"00b4":function(e,t,r){"use strict";r("ac1f");var n=r("23e7"),a=r("da84"),s=r("c65b"),o=r("e330"),i=r("1626"),u=r("861d"),c=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),l=a.Error,d=o(/./.test);n({target:"RegExp",proto:!0,forced:!c},{test:function(e){var t=this.exec;if(!i(t))return d(this,e);var r=s(t,this,e);if(null!==r&&!u(r))throw new l("RegExp exec method returned something other than an Object or null");return!!r}})},"107c":function(e,t,r){var n=r("d039"),a=r("da84"),s=a.RegExp;e.exports=n((function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"4df4":function(e,t,r){"use strict";var n=r("da84"),a=r("0366"),s=r("c65b"),o=r("7b0b"),i=r("9bdd"),u=r("e95a"),c=r("68ee"),l=r("07fa"),d=r("8418"),m=r("9a1f"),f=r("35a1"),p=n.Array;e.exports=function(e){var t=o(e),r=c(this),n=arguments.length,v=n>1?arguments[1]:void 0,g=void 0!==v;g&&(v=a(v,n>2?arguments[2]:void 0));var h,b,x,w,y,_,k=f(t),O=0;if(!k||this==p&&u(k))for(h=l(t),b=r?new this(h):p(h);h>O;O++)_=g?v(t[O],O):t[O],d(b,O,_);else for(w=m(t,k),y=w.next,b=r?new this:[];!(x=s(y,w)).done;O++)_=g?i(w,v,[x.value,O],!0):x.value,d(b,O,_);return b.length=O,b}},6062:function(e,t,r){"use strict";var n=r("6d61"),a=r("6566");n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(e,t,r){"use strict";var n=r("9bf2").f,a=r("7c73"),s=r("e2cc"),o=r("0366"),i=r("19aa"),u=r("2266"),c=r("7dd0"),l=r("2626"),d=r("83ab"),m=r("f183").fastKey,f=r("69f3"),p=f.set,v=f.getterFor;e.exports={getConstructor:function(e,t,r,c){var l=e((function(e,n){i(e,f),p(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&u(n,e[c],{that:e,AS_ENTRIES:r})})),f=l.prototype,g=v(t),h=function(e,t,r){var n,a,s=g(e),o=b(e,t);return o?o.value=r:(s.last=o={index:a=m(t,!0),key:t,value:r,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=o),n&&(n.next=o),d?s.size++:e.size++,"F"!==a&&(s.index[a]=o)),e},b=function(e,t){var r,n=g(e),a=m(t);if("F"!==a)return n.index[a];for(r=n.first;r;r=r.next)if(r.key==t)return r};return s(f,{clear:function(){var e=this,t=g(e),r=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,r=g(t),n=b(t,e);if(n){var a=n.next,s=n.previous;delete r.index[n.index],n.removed=!0,s&&(s.next=a),a&&(a.previous=s),r.first==n&&(r.first=a),r.last==n&&(r.last=s),d?r.size--:t.size--}return!!n},forEach:function(e){var t,r=g(this),n=o(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:r.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),s(f,r?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return h(this,0===e?0:e,t)}}:{add:function(e){return h(this,e=0===e?0:e,e)}}),d&&n(f,"size",{get:function(){return g(this).size}}),l},setStrong:function(e,t,r){var n=t+" Iterator",a=v(t),s=v(n);c(e,t,(function(e,t){p(this,{type:n,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=s(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},9263:function(e,t,r){"use strict";var n=r("c65b"),a=r("e330"),s=r("577e"),o=r("ad6d"),i=r("9f7f"),u=r("5692"),c=r("7c73"),l=r("69f3").get,d=r("fce3"),m=r("107c"),f=u("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,v=p,g=a("".charAt),h=a("".indexOf),b=a("".replace),x=a("".slice),w=function(){var e=/a/,t=/b*/g;return n(p,e,"a"),n(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),y=i.BROKEN_CARET,_=void 0!==/()??/.exec("")[1],k=w||_||y||d||m;k&&(v=function(e){var t,r,a,i,u,d,m,k=this,O=l(k),R=s(e),T=O.raw;if(T)return T.lastIndex=k.lastIndex,t=n(v,T,R),k.lastIndex=T.lastIndex,t;var C=O.groups,$=y&&k.sticky,U=n(o,k),S=k.source,j=0,A=R;if($&&(U=b(U,"y",""),-1===h(U,"g")&&(U+="g"),A=x(R,k.lastIndex),k.lastIndex>0&&(!k.multiline||k.multiline&&"\n"!==g(R,k.lastIndex-1))&&(S="(?: "+S+")",A=" "+A,j++),r=new RegExp("^(?:"+S+")",U)),_&&(r=new RegExp("^"+S+"$(?!\\s)",U)),w&&(a=k.lastIndex),i=n(p,$?r:k,A),$?i?(i.input=x(i.input,j),i[0]=x(i[0],j),i.index=k.lastIndex,k.lastIndex+=i[0].length):k.lastIndex=0:w&&i&&(k.lastIndex=k.global?i.index+i[0].length:a),_&&i&&i.length>1&&n(f,i[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)})),i&&C)for(i.groups=d=c(null),u=0;u<C.length;u++)m=C[u],d[m[0]]=i[m[1]];return i}),e.exports=v},"9bdd":function(e,t,r){var n=r("825a"),a=r("2a62");e.exports=function(e,t,r,s){try{return s?t(n(r)[0],r[1]):t(r)}catch(o){a(e,"throw",o)}}},"9f7f":function(e,t,r){var n=r("d039"),a=r("da84"),s=a.RegExp,o=n((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),i=o||n((function(){return!s("a","y").sticky})),u=o||n((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:u,MISSED_STICKY:i,UNSUPPORTED_Y:o}},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),s=r("1c7e"),o=!s((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:o},{from:a})},ac1f:function(e,t,r){"use strict";var n=r("23e7"),a=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,r){var n=r("83ab"),a=r("5e77").EXISTS,s=r("e330"),o=r("9bf2").f,i=Function.prototype,u=s(i.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=s(c.exec),d="name";n&&!a&&o(i,d,{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(e){return""}}})},b758:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center mt-5",staticStyle:{color:"lightgrey"}},[r("b-icon",{staticClass:"h1",attrs:{icon:"three-dots",animation:"cylon"}})],1)},a=[],s=r("2877"),o={},i=Object(s["a"])(o,n,a,!1,null,null,null);t["a"]=i.exports},c586:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-group",[r("b-form-input",{attrs:{debounce:"500",state:e.isValid,placeholder:"namespace"},on:{change:e.onChange,update:e.fetchNamespaces},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),r("div",{staticClass:"mt-2"},[e.state.isLoading?r("b-icon",{attrs:{icon:"three-dots",animation:"cylon"}}):e._e(),e._l(e.items,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"primary"},on:{click:function(r){return e.select(t)}}},[e._v(e._s(t.name))])}))],2)],1)},a=[],s=r("1da1"),o=(r("b0c0"),r("96cf"),{data:function(){return{value:"",items:[],selected:null,state:{isLoading:!1,isFormValid:!1}}},methods:{fetchNamespaces:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.state.isFormValid=!1,e.$emit("unvalidate"),""!==e.value){t.next=5;break}return e.items=[],t.abrupt("return");case 5:return e.state.isLoading=!0,t.next=8,e.$api.post("/admin/namespaces/find",{name:e.value});case 8:r=t.sent,n=r.response,a=r.error,e.state.isLoading=!1,null===a&&(e.items=n.data);case 13:case"end":return t.stop()}}),t)})))()},select:function(e){this.value=e.name,this.selected=e,this.state.isFormValid=!0,this.$emit("validate",this.selected),this.items=[]},onChange:function(){this.selected=null,this.$emit("unvalidate")}},computed:{isValid:function(){return""===this.value?null:null!==this.selected&&this.state.isFormValid}}}),i=o,u=r("2877"),c=Object(u["a"])(i,n,a,!1,null,null,null);t["a"]=c.exports},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,s=r("1dde"),o=s("map");n({target:"Array",proto:!0,forced:!o},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e88f:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-muted mt-3"},[e._v(" Users   "),"addUser"!==e.action?r("b-icon-plus",{staticClass:"mr-1",staticStyle:{color:"lightgrey"},on:{click:function(t){return e.$store.commit("action","addUser")}}}):e._e()],1),e.state.isLoading?r("loading-indicator"):e._e(),r("div",[r("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-4"},model:{value:e.showActionBar,callback:function(t){e.showActionBar=t},expression:"showActionBar"}},["addUser"===e.action?r("users-add",{on:{refresh:e.refresh}}):e._e()],1)],1),r("b-table",{staticClass:"mt-4",staticStyle:{"max-width":"650px"},attrs:{hover:"",bordeless:"",items:e.data,fields:e.fields},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[r("b-button",{staticClass:"mr-2",attrs:{variant:"outline-secondary"},on:{click:function(r){return e.toggleUserGroups(t)}}},[e._v(e._s(t.detailsShowing&&"groups"===e.actionType?"Hide":"Show")+" groups")]),r("b-button",{staticClass:"mr-2",attrs:{variant:"outline-secondary"},on:{click:function(r){return e.toggleUserOrgs(t)}}},[e._v(e._s(t.detailsShowing&&"orgs"===e.actionType?"Hide":"Show")+" orgs")]),t.item.username!==e.username?r("b-button",{attrs:{variant:"outline-danger"},on:{click:function(r){return e.confirmDeleteItem(t.item.id,t.item.username)}}},[e._v("Delete")]):e._e()]}},{key:"row-details",fn:function(t){return[void 0!==e.users[t.index]?r("div",["groups"===e.actionType?r("b-card",[r("users-manage-groups",{attrs:{user:e.users[t.index]},on:{"user-added-in-group":function(r){return e.userAddedToGroup(t,r)}}})],1):"orgs"===e.actionType?r("b-card",[r("users-manage-orgs",{attrs:{user:e.users[t.index]},on:{"user-added-in-org":function(r){return e.userAddedToOrg(t,r)}}})],1):e._e()],1):e._e()]}}])}),r("b-modal",{ref:"delete-modal",attrs:{title:"Delete user"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.deleteItem(e.itemToDelete)}}},[e._v("Delete")]),r("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.cancel()}}},[e._v("Cancel")])]}}])},[e._v(" Delete "+e._s(e.itemToDelete.username)+"? ")])],1)},a=[],s=r("5530"),o=r("1da1"),i=(r("96cf"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("2f62")),u=r("b758"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"28rem"},attrs:{title:"Add user"}},[r("b-card-text",[r("namespace-select",{on:{validate:e.validateNamespace,unvalidate:e.unvalidateNamespace}}),r("b-form-group",[r("b-form-input",{attrs:{state:e.isValidName,placeholder:"name"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("b-form-group",[r("b-form-input",{attrs:{state:e.isValidPassword,type:"password",placeholder:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e.isValidForm?r("b-button",{attrs:{variant:"success"},on:{click:e.postForm}},[e._v("Save")]):r("b-button",{attrs:{variant:"success",disabled:""}},[e._v("Save")]),r("b-button",{staticClass:"ml-2",attrs:{variant:"warning"},on:{click:function(t){return e.$store.commit("endAction")}}},[e._v("Cancel")])],1)],1)},l=[],d=(r("b0c0"),r("c586")),m={components:{NamespaceSelect:d["a"]},data:function(){return{form:{username:"",password:"",namespace:null},isNamespaceValid:!1}},methods:{unvalidateNamespace:function(){this.isNamespaceValid=!1},validateNamespace:function(e){this.form.namespace=e,this.isNamespaceValid=!0},postForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/admin/users/add",{name:e.form.username,password:e.form.password,namespace_id:e.form.namespace.id});case 2:r=t.sent,n=r.error,null==n?(e.form.name="",e.form.password="",e.form.namespace=null,e.$emit("refresh"),e.$store.commit("endAction")):409===n.reponse.status&&(e.form.name="",e.form.password="",e.form.namespace=null);case 5:case"end":return t.stop()}}),t)})))()}},computed:{isValidForm:function(){return this.isValidName&&this.isValidPassword&&this.isNamespaceValid},isValidName:function(){return 0===this.form.username.length?null:this.form.username.length>=3},isValidPassword:function(){return 0===this.form.password.length?null:this.form.password.length>=7}}},f=m,p=r("2877"),v=Object(p["a"])(f,c,l,!1,null,null,null),g=v.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-row",{staticClass:"mb-2"},[r("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[r("b",[e._v("Groups")])]),e.user.groups.size>0?r("b-col",e._l(e.user.groups,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"primary"}},[e._v(" "+e._s(t.name)+" "),r("b-icon",{staticClass:"ml-1",attrs:{icon:"x-circle-fill"},on:{click:function(r){return e.confirmRemoveUserFromGroup(t)}}})],1)})),1):r("b-col",{staticClass:"text-superlight"},[e._v("the user has no groups")])],1),e.addingToGroup?r("div",{on:{click:function(t){e.addingToGroup=!1}}},[r("users-add-to-group",{attrs:{user:e.user},on:{"add-user-to-group":function(t){return e.addUserToGroup(t)}}})],1):r("b-button",{staticClass:"float-right",attrs:{variant:"link",size:"sm"},on:{click:function(t){e.addingToGroup=!0}}},[r("b-icon-plus",{staticClass:"mr-1"}),e._v(" Add user to group ")],1),r("b-modal",{ref:"remove-from-group-modal",attrs:{title:"Remove user from group"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.removeUserFromGroup(e.groupToRemove)}}},[e._v("Remove")]),r("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.cancel()}}},[e._v("Cancel")])]}}])},[null!==e.groupToRemove?r("span",[e._v("Remove user from group "+e._s(e.groupToRemove.name)+"?")]):e._e()])],1)},b=[],x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-group",{staticClass:"mt-4"},[r("h4",{staticClass:"text-muted"},[e._v("Add user to group")]),r("div",{staticClass:"mt-2"},[e.state.isLoading?r("b-icon",{attrs:{icon:"three-dots",animation:"cylon"}}):e._e(),e.newGroups.size>0?r("div",e._l(e.newGroups,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"success",role:"button"},on:{click:function(r){return e.addUserToGroup(t)}}},[e._v(e._s(t.name))])})),1):r("p",{staticClass:"text-superlight"},[e._v("No groups found")])],1),r("div",{staticClass:"mt-4"},[r("b-button",{attrs:{variant:"warning"}},[e._v("Cancel")])],1)])},w=[];r("a4d3"),r("e01a"),r("d28b"),r("d9e2"),r("fb6a"),r("a630"),r("ac1f"),r("00b4");function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){if(e){if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function k(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r["return"]||r["return"]()}finally{if(i)throw s}}}}var O={data:function(){return{selected:null,state:{isLoading:!1},newGroups:new Set([])}},props:{user:{type:Object,required:!0}},methods:{addUserToGroup:function(e){this.$emit("add-user-to-group",e)},fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o,i,u,c,l,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state.isLoading=!0,t.next=3,e.$api.post("/admin/namespaces/groups",{namespace:e.user.namespace});case 3:if(r=t.sent,n=r.response,a=r.error,e.state.isLoading=!1,null!==a){t.next=45;break}s=new Set([]),o=k(n.data.groups),t.prev=10,o.s();case 12:if((i=o.n()).done){t.next=36;break}u=i.value,c=!1,l=k(e.user.groups),t.prev=16,l.s();case 18:if((d=l.n()).done){t.next=25;break}if(m=d.value,m.name!==u.name){t.next=23;break}return c=!0,t.abrupt("break",25);case 23:t.next=18;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](16),l.e(t.t0);case 30:return t.prev=30,l.f(),t.finish(30);case 33:c||s.add(u);case 34:t.next=12;break;case 36:t.next=41;break;case 38:t.prev=38,t.t1=t["catch"](10),o.e(t.t1);case 41:return t.prev=41,o.f(),t.finish(41);case 44:e.newGroups=s;case 45:case"end":return t.stop()}}),t,null,[[10,38,41,44],[16,27,30,33]])})))()}},mounted:function(){this.fetchData()}},R=O,T=Object(p["a"])(R,x,w,!1,null,null,null),C=T.exports,$={components:{UsersAddToGroup:C},data:function(){return{addingToGroup:!1,groupToRemove:null}},props:{user:{type:Object,required:!0}},methods:{removeUserFromGroup:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$refs["remove-from-group-modal"].hide(),t.addingToGroup&&(t.addingToGroup=!1),r.next=4,t.$api.post("/admin/groups/remove_user",{user_id:t.user.id,group_id:t.groupToRemove.id});case 4:n=r.sent,a=n.error,null===a&&(t.user.groups.delete(e),t.$bvToast.toast("Ok",{title:"User removed from group",variant:"success",autoHideDelay:1500})),t.groupToRemove=null;case 8:case"end":return r.stop()}}),r)})))()},confirmRemoveUserFromGroup:function(e){this.groupToRemove=e,this.$refs["remove-from-group-modal"].show()},addUserToGroup:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.addingToGroup=!1,r.next=3,t.$api.post("/admin/groups/add_user",{user_id:t.user.id,group_id:e.id});case 3:n=r.sent,a=n.error,null===a&&(t.user.groups.add(e),t.$emit("user-added-in-group",e),t.$bvToast.toast("Ok",{title:"User added in group",variant:"success",autoHideDelay:1500}));case 6:case"end":return r.stop()}}),r)})))()}}},U=$,S=Object(p["a"])(U,h,b,!1,null,null,null),j=S.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-row",{staticClass:"mb-2"},[r("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[r("b",[e._v("Orgs")])]),e.user.orgs.size>0?r("b-col",e._l(e.user.orgs,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"primary"}},[e._v(" "+e._s(t.name)+" "),r("b-icon",{staticClass:"ml-1",attrs:{icon:"x-circle-fill"},on:{click:function(r){return e.confirmRemoveUserFromOrg(t)}}})],1)})),1):r("b-col",{staticClass:"text-superlight"},[e._v("the user has no orgs")])],1),e.addingToOrg?r("div",[r("users-add-to-org",{attrs:{user:e.user},on:{"add-user-to-org":function(t){return e.addUserToOrg(t)},cancel:function(t){e.addingToOrg=!1}}})],1):r("b-button",{staticClass:"float-right",attrs:{variant:"link",size:"sm"},on:{click:function(t){e.addingToOrg=!0}}},[r("b-icon-plus",{staticClass:"mr-1"}),e._v(" Add user to org ")],1),r("b-modal",{ref:"remove-from-org-modal",attrs:{title:"Remove user from org"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.removeUserFromOrg(e.orgToRemove)}}},[e._v("Remove")]),r("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.cancel()}}},[e._v("Cancel")])]}}])},[null!==e.orgToRemove?r("span",[e._v("Remove user from org "+e._s(e.orgToRemove.name)+"?")]):e._e()])],1)},E=[],I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-group",{staticClass:"mt-4"},[r("h4",{staticClass:"text-muted"},[e._v("Add user to org")]),r("div",{staticClass:"mt-3"},[r("orgs-select",{attrs:{user:e.user},on:{"org-selected":function(t){return e.addUserToOrg(t)}}})],1),r("div",{staticClass:"mt-4"},[r("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.$emit("cancel")}}},[e._v("Cancel")])],1)])},G=[],D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-group",[r("b-form-input",{staticStyle:{width:"12em"},attrs:{debounce:"500",placeholder:"org"},on:{change:e.onChange,update:e.fetchOrgs},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),r("div",{staticClass:"mt-2"},[e.state.isLoading?r("b-icon",{attrs:{icon:"three-dots",animation:"cylon"}}):e._e(),e._l(e.items,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"primary",role:"button"},on:{click:function(r){return e.select(t)}}},[e._v(e._s(t.name))])}))],2)],1)},F=[],N=(r("d81d"),r("159b"),{data:function(){return{value:"",items:[],selected:null,state:{isLoading:!1}}},props:{user:{type:Object,required:!0}},methods:{fetchOrgs:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.value){t.next=3;break}return e.items=[],t.abrupt("return");case 3:return e.state.isLoading=!0,t.next=6,e.$api.post("/admin/orgs/find",{name:e.value});case 6:r=t.sent,n=r.response,a=r.error,e.state.isLoading=!1,null===a&&(s=new Set([]),o=new Set(Array.from(e.user.orgs).map((function(e){return e.name}))),n.data.forEach((function(e){console.log(e,o.has(e.name)),o.has(e.name)||s.add(e)})),e.items=s);case 11:case"end":return t.stop()}}),t)})))()},select:function(e){this.$emit("org-selected",e)},onChange:function(){this.selected=null}}}),V=N,L=Object(p["a"])(V,D,F,!1,null,null,null),z=L.exports,H={components:{OrgsSelect:z},data:function(){return{state:{isLoading:!1},newOrgs:new Set([])}},props:{user:{type:Object,required:!0}},methods:{addUserToOrg:function(e){this.$emit("add-user-to-org",e)}}},B=H,P=Object(p["a"])(B,I,G,!1,null,null,null),q=P.exports,M={components:{UsersAddToOrg:q},data:function(){return{addingToOrg:!1,orgToRemove:null}},props:{user:{type:Object,required:!0}},methods:{removeUserFromOrg:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$refs["remove-from-org-modal"].hide(),t.addingToOrg&&(t.addingToOrg=!1),r.next=4,t.$api.post("/admin/orgs/remove_user",{user_id:t.user.id,org_id:t.orgToRemove.id});case 4:n=r.sent,a=n.error,null===a&&(t.user.orgs.delete(e),t.$bvToast.toast("Ok",{title:"User removed from org",variant:"success",autoHideDelay:1500})),t.orgToRemove=null;case 8:case"end":return r.stop()}}),r)})))()},confirmRemoveUserFromOrg:function(e){this.orgToRemove=e,this.$refs["remove-from-org-modal"].show()},addUserToOrg:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.addingToOrg=!1,r.next=3,t.$api.post("/admin/orgs/add_user",{user_id:t.user.id,org_id:e.id});case 3:n=r.sent,a=n.error,null===a&&(t.user.orgs.add(e),t.$emit("user-added-in-org",e),t.$bvToast.toast("Ok",{title:"User added in org",variant:"success",autoHideDelay:1500}));case 6:case"end":return r.stop()}}),r)})))()}}},K=M,J=Object(p["a"])(K,A,E,!1,null,null,null),Y=J.exports,X={components:{LoadingIndicator:u["a"],UsersAdd:g,UsersManageGroups:j,UsersManageOrgs:Y},data:function(){return{data:[],state:{isLoading:!1},fields:[{key:"id",sortable:!0},{key:"username",sortable:!0},{key:"namespace",sortable:!0},{key:"action",sortable:!1}],itemToDelete:{},users:{},actionType:null}},methods:{userAddedToGroup:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.users[e.index].groups.add(t),e.toggleDetails(),n.next=4,new Promise((function(e){return setTimeout(e,10)}));case 4:e.toggleDetails();case 5:case"end":return n.stop()}}),n)})))()},userAddedToOrg:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.users[e.index].orgs.add(t),e.toggleDetails(),n.next=4,new Promise((function(e){return setTimeout(e,10)}));case 4:e.toggleDetails();case 5:case"end":return n.stop()}}),n)})))()},fetchUserGroups:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$api.post("/admin/users/groups",{id:e.item.id});case 2:n=r.sent,a=n.response,s=e.item,s.index=e.index,s.groups=new Set(a.data.groups),t.users[e.index]=s;case 8:case"end":return r.stop()}}),r)})))()},fetchUserOrgs:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$api.post("/admin/users/orgs",{id:e.item.id});case 2:n=r.sent,a=n.response,s=e.item,s.index=e.index,s.orgs=new Set(a.data.orgs),t.users[e.index]=s;case 8:case"end":return r.stop()}}),r)})))()},toggleUserOrgs:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.detailsShowing){r.next=6;break}return t.actionType="orgs",r.next=4,t.fetchUserOrgs(e);case 4:r.next=7;break;case 6:t.actionType=null;case 7:e.toggleDetails();case 8:case"end":return r.stop()}}),r)})))()},toggleUserGroups:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.detailsShowing){r.next=6;break}return t.actionType="groups",r.next=4,t.fetchUserGroups(e);case 4:r.next=7;break;case 6:t.actionType=null;case 7:e.toggleDetails();case 8:case"end":return r.stop()}}),r)})))()},refresh:function(){this.fetchUsers(),this.$bvToast.toast("ok",{title:"User saved",variant:"success",autoHideDelay:1500})},fetchUsers:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.get("/admin/users/all");case 2:r=t.sent,n=r.response,a=r.error,a||(e.data=n.data);case 6:case"end":return t.stop()}}),t)})))()},confirmDeleteItem:function(e,t){this.itemToDelete={username:t,id:e},this.$refs["delete-modal"].show()},deleteItem:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$refs["delete-modal"].hide(),r.next=3,t.$api.post("/admin/users/delete",{id:e.id});case 3:n=r.sent,a=n.error,null===a&&(t.$bvToast.toast("Ok",{title:"User deleted",autoHideDelay:1e3,variant:"success"}),t.fetchUsers());case 6:case"end":return r.stop()}}),r)})))()}},mounted:function(){this.fetchUsers()},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["c"])(["action","username"])),Object(i["b"])({s:"showActionBar"})),{},{showActionBar:{get:function(){return this.s},set:function(e){return e}}})},Q=X,W=Object(p["a"])(Q,n,a,!1,null,null,null);t["default"]=W.exports},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),s=r("e8b5"),o=r("68ee"),i=r("861d"),u=r("23cb"),c=r("07fa"),l=r("fc6a"),d=r("8418"),m=r("b622"),f=r("1dde"),p=r("f36a"),v=f("slice"),g=m("species"),h=a.Array,b=Math.max;n({target:"Array",proto:!0,forced:!v},{slice:function(e,t){var r,n,a,m=l(this),f=c(m),v=u(e,f),x=u(void 0===t?f:t,f);if(s(m)&&(r=m.constructor,o(r)&&(r===h||s(r.prototype))?r=void 0:i(r)&&(r=r[g],null===r&&(r=void 0)),r===h||void 0===r))return p(m,v,x);for(n=new(void 0===r?h:r)(b(x-v,0)),a=0;v<x;v++,a++)v in m&&d(n,a,m[v]);return n.length=a,n}})},fce3:function(e,t,r){var n=r("d039"),a=r("da84"),s=a.RegExp;e.exports=n((function(){var e=s(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-c4437aee.693eea1f.js.map